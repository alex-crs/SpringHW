<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <title>Пользователи</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" th:href="@{/styles/css/style.css}"/>
</head>

<body>
<div th:replace="up_menu :: main_menu"></div>
<h1 class="title">User list:</h1>
<div class="product_blocks">
    <div class="list_item">
        <table class="table">
            <thead>
            <tr>
                <th scope="col">№</th>
                <th scope="col">name</th>
                <th scope="col">role</th>
                <th scope="col">change</th>
                <th scope="col">action</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="user, iter: ${userList}">
                <td th:text="${iter.count}"></td>
                <td th:text="${user.username}" th:with="id=${user.id}"></td>
                <td><span th:each="role: ${user.roleList}">
                        <span th:text="${role}"></span><br>
                    </span>
                </td>
                <form th:action="@{/addRole(id=${user.id}, username=${user.username})}" method="post">
                    <td >
                        <select class="form-select" aria-label="Default select example" id="UserRoles" name="UserRoles">
                            <option selected></option>
                            <option th:value="ROLE_ADMIN">ADMIN</option>
                            <option th:value="ROLE_MANAGER">MANAGER</option>
                            <option th:value="ROLE_USER">USER</option>
                        </select>
                    </td>
                    <td><button type="submit" class="btn btn-warning" role="button">ADD</button>
                    <a th:href="@{/clearRoles(id=${user.id})}" class="btn btn-warning" role="button">CLEAR</a>
                    <a th:href="@{/deleteUser(id=${user.id})}" class="btn btn-danger" role="button">REMOVE</a>
                    </td>
                </form>
            </tbody>
            <tbody>
            <form th:action="@{/addUser}" th:object="${newUser}" method="POST">
                <td></td>
                <td><input type="text" class="form-control" id="username" placeholder="username" name="username"  aria-describedby="text"></td>
                <td><input type="text" class="form-control" id="password" name="password" placeholder="password"  aria-describedby="text"></td>
                <td><button type="submit" class="btn btn-warning" role="button">Add user</button></td>
                <td></td>
            </form>
            </tbody>
        </table>
    </div>
</div>
</div>
<div th:replace="foot_menu :: footer"></div>
</body>

</html>